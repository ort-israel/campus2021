define(["jquery","core/modal_factory","core/str","core/templates","core/log"],function(a,b,c,d,e){var f=function(){this.id=""},g=new f;return g.initializer=function(f){g.id=f.id,g.mode=f.mode,e.info("Initialize groupapprovalstatus JS!","mod_publication"),g.modal||(g.modalpromise=b.create({type:b.types.DEFAULT,body:"..."})),c.get_string("filedetails","mod_publication").done(function(b){e.info("Done loading strings...","mod_publication"),g.modalpromise.done(function(c){e.info("Done preparing modal","mod_publication"),g.modal=c,a(".path-mod-publication .statustable .approvaldetails *").click(function(c){c.stopPropagation();var e,f=a(c.target),h=f.parent();try{e=h.data("approved")}catch(i){e=[]}var j;try{j=h.data("rejected")}catch(i){j=[]}var k;try{k=h.data("pending")}catch(i){k=[]}var l;try{l=b+" "+h.data("filename")}catch(i){l=b}var m;try{m=h.data("status")}catch(i){m={approved:!1,rejected:!1,pending:!1}}var n={id:g.id,mode:g.mode,status:m,approved:e,rejected:j,pending:k},o=d.render("mod_publication/approvaltooltip",n);o.done(function(a){g.modal.setTitle(l),g.modal.setBody(a),g.modal.show()}).fail(function(a){g.modal.setBody(a.message),g.modal.show()})}),a(".path-mod-publication .statustable .approvaldetails").fadeIn("slow")})}).fail(function(a){e.error("Error getting strings: "+a,"mod_publication")})},g});